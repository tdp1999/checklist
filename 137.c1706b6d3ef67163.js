"use strict";(self.webpackChunkchecklist=self.webpackChunkchecklist||[]).push([[137],{9137:(et,O,s)=>{s.r(O),s.d(O,{ItemModule:()=>_e});var m=s(6362),f=s(6352),w=s(2218),H=s(4505),A=s(4139),Q=s(1942),D=s(9095),P=s(5722),V=s(7418),x=s(6942),v=s(8494),p=s(2565),X=s(549),N=s(2798),u=s(587),h=s(5758),_=s(9151),q=s(3298),ee=s(823),te=s(2692),e=s(3184),C=s(4770),R=s(4683),ne=s(7987),U=s(1434),oe=s(1130),ie=s(2466),B=s(6312),se=s(2160),F=s(5921),re=s(3910),ae=s(9361),le=s(8881),ce=s(9054);const he=new class ue extends ce.v{}(class de extends le.o{constructor(o,t){super(o,t),this.scheduler=o,this.work=t}schedule(o,t=0){return t>0?super.schedule(o,t):(this.delay=t,this.state=o,this.scheduler.flush(this),this)}execute(o,t){return t>0||this.closed?super.execute(o,t):this._execute(o,t)}requestAsyncId(o,t,i=0){return null!==i&&i>0||null===i&&this.delay>0?super.requestAsyncId(o,t,i):o.flush(this)}});var me=s(6957),pe=s(14),T=s(7928);class y extends pe.L{constructor(o,t,i=0){super(o),this.scheduler=t,this.delay=i}static dispatch(o){const{notification:t,destination:i}=o;t.observe(i),this.unsubscribe()}scheduleMessage(o){this.destination.add(this.scheduler.schedule(y.dispatch,this.delay,new fe(o,this.destination)))}_next(o){this.scheduleMessage(T.P.createNext(o))}_error(o){this.scheduleMessage(T.P.createError(o)),this.unsubscribe()}_complete(){this.scheduleMessage(T.P.createComplete()),this.unsubscribe()}}class fe{constructor(o,t){this.notification=o,this.destination=t}}var ve=s(9086),Ce=s(1722);class ye extends w.xQ{constructor(o=Number.POSITIVE_INFINITY,t=Number.POSITIVE_INFINITY,i){super(),this.scheduler=i,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=o<1?1:o,this._windowTime=t<1?1:t,t===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(o){if(!this.isStopped){const t=this._events;t.push(o),t.length>this._bufferSize&&t.shift()}super.next(o)}nextTimeWindow(o){this.isStopped||(this._events.push(new be(this._getNow(),o)),this._trimBufferThenGetEvents()),super.next(o)}_subscribe(o){const t=this._infiniteTimeWindow,i=t?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,a=i.length;let l;if(this.closed)throw new ve.N;if(this.isStopped||this.hasError?l=me.w.EMPTY:(this.observers.push(o),l=new Ce.W(this,o)),r&&o.add(o=new y(o,r)),t)for(let d=0;d<a&&!o.closed;d++)o.next(i[d]);else for(let d=0;d<a&&!o.closed;d++)o.next(i[d].value);return this.hasError?o.error(this.thrownError):this.isStopped&&o.complete(),l}_getNow(){return(this.scheduler||he).now()}_trimBufferThenGetEvents(){const o=this._getNow(),t=this._bufferSize,i=this._windowTime,r=this._events,a=r.length;let l=0;for(;l<a&&!(o-r[l].time<i);)l++;return a>t&&(l=Math.max(l,a-t)),l>0&&r.splice(0,l),r}}class be{constructor(o,t){this.time=o,this.value=t}}function Ee(n,o){}const b=()=>{const n="undefined"!=typeof window?window:void 0;return n&&n.tinymce?n.tinymce:null};let we=(()=>{class n{constructor(){this.onBeforePaste=new e.vpe,this.onBlur=new e.vpe,this.onClick=new e.vpe,this.onContextMenu=new e.vpe,this.onCopy=new e.vpe,this.onCut=new e.vpe,this.onDblclick=new e.vpe,this.onDrag=new e.vpe,this.onDragDrop=new e.vpe,this.onDragEnd=new e.vpe,this.onDragGesture=new e.vpe,this.onDragOver=new e.vpe,this.onDrop=new e.vpe,this.onFocus=new e.vpe,this.onFocusIn=new e.vpe,this.onFocusOut=new e.vpe,this.onKeyDown=new e.vpe,this.onKeyPress=new e.vpe,this.onKeyUp=new e.vpe,this.onMouseDown=new e.vpe,this.onMouseEnter=new e.vpe,this.onMouseLeave=new e.vpe,this.onMouseMove=new e.vpe,this.onMouseOut=new e.vpe,this.onMouseOver=new e.vpe,this.onMouseUp=new e.vpe,this.onPaste=new e.vpe,this.onSelectionChange=new e.vpe,this.onActivate=new e.vpe,this.onAddUndo=new e.vpe,this.onBeforeAddUndo=new e.vpe,this.onBeforeExecCommand=new e.vpe,this.onBeforeGetContent=new e.vpe,this.onBeforeRenderUI=new e.vpe,this.onBeforeSetContent=new e.vpe,this.onChange=new e.vpe,this.onClearUndos=new e.vpe,this.onDeactivate=new e.vpe,this.onDirty=new e.vpe,this.onExecCommand=new e.vpe,this.onGetContent=new e.vpe,this.onHide=new e.vpe,this.onInit=new e.vpe,this.onInitNgModel=new e.vpe,this.onLoadContent=new e.vpe,this.onNodeChange=new e.vpe,this.onPostProcess=new e.vpe,this.onPostRender=new e.vpe,this.onPreInit=new e.vpe,this.onPreProcess=new e.vpe,this.onProgressState=new e.vpe,this.onRedo=new e.vpe,this.onRemove=new e.vpe,this.onReset=new e.vpe,this.onResizeEditor=new e.vpe,this.onSaveContent=new e.vpe,this.onSetAttrib=new e.vpe,this.onObjectResizeStart=new e.vpe,this.onObjectResized=new e.vpe,this.onObjectSelected=new e.vpe,this.onSetContent=new e.vpe,this.onShow=new e.vpe,this.onSubmit=new e.vpe,this.onUndo=new e.vpe,this.onVisualAid=new e.vpe}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=e.lG2({type:n,outputs:{onBeforePaste:"onBeforePaste",onBlur:"onBlur",onClick:"onClick",onContextMenu:"onContextMenu",onCopy:"onCopy",onCut:"onCut",onDblclick:"onDblclick",onDrag:"onDrag",onDragDrop:"onDragDrop",onDragEnd:"onDragEnd",onDragGesture:"onDragGesture",onDragOver:"onDragOver",onDrop:"onDrop",onFocus:"onFocus",onFocusIn:"onFocusIn",onFocusOut:"onFocusOut",onKeyDown:"onKeyDown",onKeyPress:"onKeyPress",onKeyUp:"onKeyUp",onMouseDown:"onMouseDown",onMouseEnter:"onMouseEnter",onMouseLeave:"onMouseLeave",onMouseMove:"onMouseMove",onMouseOut:"onMouseOut",onMouseOver:"onMouseOver",onMouseUp:"onMouseUp",onPaste:"onPaste",onSelectionChange:"onSelectionChange",onActivate:"onActivate",onAddUndo:"onAddUndo",onBeforeAddUndo:"onBeforeAddUndo",onBeforeExecCommand:"onBeforeExecCommand",onBeforeGetContent:"onBeforeGetContent",onBeforeRenderUI:"onBeforeRenderUI",onBeforeSetContent:"onBeforeSetContent",onChange:"onChange",onClearUndos:"onClearUndos",onDeactivate:"onDeactivate",onDirty:"onDirty",onExecCommand:"onExecCommand",onGetContent:"onGetContent",onHide:"onHide",onInit:"onInit",onInitNgModel:"onInitNgModel",onLoadContent:"onLoadContent",onNodeChange:"onNodeChange",onPostProcess:"onPostProcess",onPostRender:"onPostRender",onPreInit:"onPreInit",onPreProcess:"onPreProcess",onProgressState:"onProgressState",onRedo:"onRedo",onRemove:"onRemove",onReset:"onReset",onResizeEditor:"onResizeEditor",onSaveContent:"onSaveContent",onSetAttrib:"onSetAttrib",onObjectResizeStart:"onObjectResizeStart",onObjectResized:"onObjectResized",onObjectSelected:"onObjectSelected",onSetContent:"onSetContent",onShow:"onShow",onSubmit:"onSubmit",onUndo:"onUndo",onVisualAid:"onVisualAid"}}),n})();const L=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onResizeEditor","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],I=(n,o,t)=>(0,B.R)(n,o).pipe((0,F.R)(t)),Z=(n,o)=>"string"==typeof n?n.split(",").map(t=>t.trim()):Array.isArray(n)?n:o;let j=0;const Y=n=>void 0!==n&&"textarea"===n.tagName.toLowerCase(),z=n=>void 0===n||""===n?[]:Array.isArray(n)?n:n.split(" "),Oe=(n,o)=>z(n).concat(z(o)),Ae=()=>{},$=n=>null==n,Pe=(()=>{let n={script$:null};return{load:(i,r)=>n.script$||(n.script$=(0,se.P)(()=>{const a=i.createElement("script");return a.referrerPolicy="origin",a.type="application/javascript",a.src=r,i.head.appendChild(a),(0,B.R)(a,"load").pipe((0,re.q)(1),(0,ae.h)(void 0))}).pipe(function Ie(n,o,t){let i;return i=n&&"object"==typeof n?n:{bufferSize:n,windowTime:o,refCount:!1,scheduler:t},r=>r.lift(function Se({bufferSize:n=Number.POSITIVE_INFINITY,windowTime:o=Number.POSITIVE_INFINITY,refCount:t,scheduler:i}){let r,l,a=0,d=!1,g=!1;return function(qe){let E;a++,!r||d?(d=!1,r=new ye(n,o,i),E=r.subscribe(this),l=qe.subscribe({next(M){r.next(M)},error(M){d=!0,r.error(M)},complete(){g=!0,l=void 0,r.complete()}}),g&&(l=void 0)):E=r.subscribe(this),this.add(()=>{a--,E.unsubscribe(),E=void 0,l&&!g&&t&&0===a&&(l.unsubscribe(),l=void 0,r=void 0)})}}(i))}({bufferSize:1,refCount:!0}))),reinitialize:()=>{n={script$:null}}}})(),xe=new e.OlP("TINYMCE_SCRIPT_SRC"),Ne={provide:u.JU,useExisting:(0,e.Gpc)(()=>K),multi:!0};let K=(()=>{class n extends we{constructor(t,i,r,a){super(),this.platformId=r,this.tinymceScriptSrc=a,this.cloudChannel="6",this.apiKey="no-api-key",this.id="",this.modelEvents="change input undo redo",this.onTouchedCallback=Ae,this.destroy$=new w.xQ,this.initialise=()=>{const l=Object.assign(Object.assign({},this.init),{selector:void 0,target:this._element,inline:this.inline,readonly:this.disabled,plugins:Oe(this.init&&this.init.plugins,this.plugins),toolbar:this.toolbar||this.init&&this.init.toolbar,setup:d=>{this._editor=d,I(d,"init",this.destroy$).subscribe(()=>{this.initEditor(d)}),((n,o,t)=>{(n=>{const o=Z(n.ignoreEvents,[]);return Z(n.allowedEvents,L).filter(i=>L.includes(i)&&!o.includes(i))})(n).forEach(r=>{const a=n[r];I(o,r.substring(2),t).subscribe(l=>{a.observers.length>0&&n.ngZone.run(()=>a.emit({event:l,editor:o}))})})})(this,d,this.destroy$),this.init&&"function"==typeof this.init.setup&&this.init.setup(d)}});Y(this._element)&&(this._element.style.visibility=""),this.ngZone.runOutsideAngular(()=>{b().init(l)})},this._elementRef=t,this.ngZone=i}set disabled(t){var i;this._disabled=t,this._editor&&this._editor.initialized&&("function"==typeof(null===(i=this._editor.mode)||void 0===i?void 0:i.set)?this._editor.mode.set(t?"readonly":"design"):this._editor.setMode(t?"readonly":"design"))}get disabled(){return this._disabled}get editor(){return this._editor}writeValue(t){this._editor&&this._editor.initialized?this._editor.setContent($(t)?"":t):this.initialValue=null===t?void 0:t}registerOnChange(t){this.onChangeCallback=t}registerOnTouched(t){this.onTouchedCallback=t}setDisabledState(t){this.disabled=t}ngAfterViewInit(){var t;(0,m.NF)(this.platformId)&&(this.id=this.id||(n=>{const t=(new Date).getTime(),i=Math.floor(1e9*Math.random());return j++,"tiny-angular_"+i+j+String(t)})(),this.inline=void 0!==this.inline?!1!==this.inline:!!(null===(t=this.init)||void 0===t?void 0:t.inline),this.createElement(),null!==b()?this.initialise():this._element&&this._element.ownerDocument&&Pe.load(this._element.ownerDocument,this.getScriptSrc()).pipe((0,F.R)(this.destroy$)).subscribe(this.initialise))}ngOnDestroy(){this.destroy$.next(),null!==b()&&b().remove(this._editor)}createElement(){this._element=document.createElement(this.inline?"string"==typeof this.tagName?this.tagName:"div":"textarea"),this._element&&(document.getElementById(this.id)&&console.warn(`TinyMCE-Angular: an element with id [${this.id}] already exists. Editors with duplicate Id will not be able to mount`),this._element.id=this.id,Y(this._element)&&(this._element.style.visibility="hidden"),this._elementRef.nativeElement.appendChild(this._element))}getScriptSrc(){return $(this.tinymceScriptSrc)?`https://cdn.tiny.cloud/1/${this.apiKey}/tinymce/${this.cloudChannel}/tinymce.min.js`:this.tinymceScriptSrc}initEditor(t){I(t,"blur",this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.onTouchedCallback())}),I(t,this.modelEvents,this.destroy$).subscribe(()=>{this.ngZone.run(()=>this.emitOnChange(t))}),"string"==typeof this.initialValue&&this.ngZone.run(()=>{t.setContent(this.initialValue),t.getContent()!==this.initialValue&&this.emitOnChange(t),void 0!==this.onInitNgModel&&this.onInitNgModel.emit(t)})}emitOnChange(t){this.onChangeCallback&&this.onChangeCallback(t.getContent({format:this.outputFormat}))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(e.SBq),e.Y36(e.R0b),e.Y36(e.Lbi),e.Y36(xe,8))},n.\u0275cmp=e.Xpm({type:n,selectors:[["editor"]],inputs:{cloudChannel:"cloudChannel",apiKey:"apiKey",init:"init",id:"id",initialValue:"initialValue",outputFormat:"outputFormat",inline:"inline",tagName:"tagName",plugins:"plugins",toolbar:"toolbar",modelEvents:"modelEvents",allowedEvents:"allowedEvents",ignoreEvents:"ignoreEvents",disabled:"disabled"},features:[e._Bn([Ne]),e.qOj],decls:1,vars:0,template:function(t,i){1&t&&e.YNc(0,Ee,0,0,"ng-template")},styles:["[_nghost-%COMP%]{display:block}"]}),n})(),Re=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.ez,u.u5]]}),n})();var S=s(7317);function Ue(n,o){if(1&n&&(e.TgZ(0,"mat-option",8),e._uU(1),e.qZA()),2&n){const t=o.$implicit;e.Q6J("value",t._id),e.xp6(1),e.Oqu(t.name)}}function Be(n,o){1&n&&(e.ynx(0),e._UZ(1,"app-loading-spinner"),e.BQk())}const Fe=function(){return["codesample","autolink","lists","link","image","charmap","preview","anchor","code"]},Le=function(){return{text:"HTML/XML",value:"markup"}},Ze=function(){return{text:"SCSS",value:"scss"}},je=function(n,o){return[n,o]},ze=function(n,o){return{height:150,menubar:!1,plugins:n,toolbar:"formatselect | bold italic backcolor | \n                                alignleft aligncenter alignright alignjustify | \n                                bullist numlist outdent indent | removeformat | codesample print code",codesample_languages:o}};let G=(()=>{class n{constructor(t,i,r,a,l){this._fb=t,this._cdr=i,this._slugifyPipe=r,this._dialogRef=a,this.data=l,this.title="",this.submitText="OK",this.halt=!1,this.isEditorLoading=!1,this._subs=new N.Y}ngOnInit(){switch(this.loadingStateHandler("isEditorLoading"),this._dialogRef.updateSize("60%","fit-content"),this.data.action){case p.U.CREATE:this.title="Create New Item",this.submitText="Add",this.generateForm();break;case p.U.EDIT:this.title="Edit Item",this.submitText="Save",this.generateForm(this.data.payload)}this.autocompleteSlug()}ngOnDestroy(){this._subs.unsubscribe()}get f(){return this.form.controls}generateForm(t){var i;if(this.form=this._fb.group({name:[t?t.name:"",[u.kI.required]],slug:[t?t.slug:"",[u.kI.required],null===(i=this.data.validateList)||void 0===i?void 0:i.slug.bind(this.data.thisRef)],categoryID:[t?t.categoryID:"",[u.kI.required]],content:[{value:t?t.content:"",disabled:!1},[u.kI.required]],isDone:[!!t&&t.isDone]}),t){this.form.addControl("_id",this._fb.control(t._id));let r=this.form.get("slug");null==r||r.disable()}}submitForm(){var t;null===(t=this.data.callback)||void 0===t||t.bind(this.data.thisRef)(this.form.getRawValue()),this._cdr.markForCheck()}autocompleteSlug(){this._subs.add(this.f.name.valueChanges.pipe((0,_.h)(t=>t.length>0),(0,P.O)(this.f.name.value),(0,q.x)(),(0,ee.b)(500),(0,te.b)(t=>{this.f.slug.setValue(this._slugifyPipe.transform(t))})).subscribe())}loadingStateHandler(t){"isEditorLoading"===t&&(this.isEditorLoading=!this.isEditorLoading),this.halt=this.isEditorLoading}editorInitHandler(){this.loadingStateHandler("isEditorLoading")}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u.qu),e.Y36(e.sBO),e.Y36(v.N),e.Y36(h.so),e.Y36(h.WI))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-item-dialog"]],features:[e._Bn([v.N])],decls:29,vars:17,consts:[[3,"formGroup","ngSubmit"],["mat-dialog-title","","appTestDirective",""],["mat-dialog-content","",1,"relative","dialog-content"],["appearance","fill"],["formControlName","name","matInput","","placeholder","Add name"],["matErrorMessage",""],["formControlName","slug","matInput","","placeholder","Add slug"],["formControlName","categoryID"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],[4,"ngIf"],["customErrorField","","formControlName","content","apiKey","n6uchik9lzofpnvapnob6kyk3m43qhiafaad5cxh4rkg4ee3",3,"init","onInit"],["mat-dialog-actions",""],["type","submit","mat-button","","mat-dialog-close","",3,"disabled"],["type","button","mat-button","","mat-dialog-close",""]],template:function(t,i){1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return i.submitForm()}),e.TgZ(1,"h1",1),e._uU(2),e.qZA(),e.TgZ(3,"div",2)(4,"mat-form-field",3)(5,"mat-label"),e._uU(6,"Name"),e.qZA(),e._UZ(7,"input",4)(8,"mat-error",5),e.qZA(),e.TgZ(9,"mat-form-field",3)(10,"mat-label"),e._uU(11,"Slug"),e.qZA(),e._UZ(12,"input",6)(13,"mat-error",5),e.qZA(),e.TgZ(14,"mat-form-field",3)(15,"mat-label"),e._uU(16,"Category"),e.qZA(),e.TgZ(17,"mat-select",7)(18,"mat-option",8),e._uU(19,"None"),e.qZA(),e.YNc(20,Ue,2,2,"mat-option",9),e.qZA(),e._UZ(21,"mat-error",5),e.qZA(),e.YNc(22,Be,2,0,"ng-container",10),e.TgZ(23,"editor",11),e.NdJ("onInit",function(){return i.editorInitHandler()}),e.qZA()(),e.TgZ(24,"div",12)(25,"button",13),e._uU(26),e.qZA(),e.TgZ(27,"button",14),e._uU(28,"Cancel"),e.qZA()()()),2&t&&(e.Q6J("formGroup",i.form),e.xp6(2),e.Oqu(i.title),e.xp6(16),e.Q6J("value",null),e.xp6(2),e.Q6J("ngForOf",i.data.category),e.xp6(2),e.Q6J("ngIf",i.halt),e.xp6(1),e.Q6J("init",e.WLB(14,ze,e.DdM(8,Fe),e.WLB(11,je,e.DdM(9,Le),e.DdM(10,Ze)))),e.xp6(2),e.Q6J("disabled",!i.form.valid),e.xp6(1),e.hij(" ",i.submitText," "))},directives:[u._Y,u.JL,u.sg,h.uh,h.xY,C.KE,C.hX,u.Fj,R.Nt,u.JJ,u.u,C.TO,ne.H,U.gD,oe.ey,m.sg,m.O5,ie.g,K,h.H8,S.lW,h.ZT],styles:[".container[_ngcontent-%COMP%]{width:100%}@media (min-width: 640px){.container[_ngcontent-%COMP%]{max-width:640px}}@media (min-width: 768px){.container[_ngcontent-%COMP%]{max-width:768px}}@media (min-width: 1024px){.container[_ngcontent-%COMP%]{max-width:1024px}}@media (min-width: 1280px){.container[_ngcontent-%COMP%]{max-width:1280px}}@media (min-width: 1536px){.container[_ngcontent-%COMP%]{max-width:1536px}}.dialog-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}"]}),n})();var $e=s(2528),Je=s(6909),Ke=s(7514),Ge=s(2422);const ke=function(n,o,t){return[n,o,t]},We=[{path:"",component:(()=>{class n{constructor(t,i,r,a,l,d,g){this._router=t,this._dialog=i,this._snackbar=r,this._slugifyPipe=a,this._activatedRoute=l,this._itemService=d,this._categoryService=g,this.actionType=p.U,this.loadingError$=new w.xQ,this.displayedColumn=["#","name","categoryName","content","slug"],this.columns=[{columnDef:"#",header:"No.",cell:c=>"0"},{columnDef:"name",header:"Name",cell:c=>`${c.name}`},{columnDef:"categoryName",header:"Category",cell:c=>`${c.categoryName}`},{columnDef:"content",header:"Content",cell:c=>`${c.content}`},{columnDef:"slug",header:"Slug",cell:c=>`${c.slug}`}],this._sub=new N.Y,this._itemSubject$=new H.X(!0),this.categoryList=[],this.filter={_page:1},this.totalItems=0,this.items$=this._itemSubject$.asObservable().pipe((0,D.w)(()=>this._itemService.getItemList(this.filter).pipe((0,P.O)(void 0),(0,V.K)(c=>(console.error(c),this.loadingError$.next(!0),this._snackbar.open(c.message,"Dismiss",{duration:2e3}),(0,A.of)(void 0))),(0,x.U)(c=>{if(c)return this.totalItems=c.paginations._totalRow,c.data}))))}ngOnInit(){this._sub.sink=this._categoryService.getCategoryListNoPagination().subscribe(t=>{this.categoryList=t}),this._sub.sink=this._activatedRoute.queryParams.subscribe(t=>{t.itemID&&this.editItem(t.itemID)})}ngOnDestroy(){this._sub.unsubscribe()}onActionTriggered(t){let{type:i,payload:r}=t;switch(i){case p.U.VIEW:this.viewItem(r);break;case p.U.CREATE:this.addItem();break;case p.U.EDIT:this.editItem(r);break;case p.U.DELETE:this.deleteItem(r)}}onPaginationChange(t){this.filter._page=t.pageIndex+1,this.filter._limit=t.pageSize,this._itemSubject$.next(!0)}viewItem(t){let i=this._slugifyPipe.transform(t.categoryName);this._router.navigate(["/checklist/",i,t.slug]),console.log(t)}addItem(){this._dialog.open(G,{data:{action:this.actionType.CREATE,callback:this.onAddItem,validateList:{slug:this.validateSlug},category:this.categoryList,thisRef:this}})}onAddItem(t){this._sub.sink=this._itemService.addItem(t).subscribe(i=>{this._itemSubject$.next(!0),this._snackbar.open("Item added","Dismiss",{duration:2e3})})}editItem(t){this._sub.sink=this._itemService.retrieveItem(t).subscribe(i=>{this._dialog.open(G,{data:{action:this.actionType.EDIT,callback:this.onEditItem,validateList:{slug:this.validateSlug},category:this.categoryList,thisRef:this,payload:i[0]}})})}onEditItem(t){console.log(t),this._sub.sink=this._itemService.updateItem(t).subscribe(i=>{this._itemSubject$.next(!0),this._snackbar.open("Item updated","Dismiss",{duration:2e3})})}deleteItem(t){let i=this._dialog.open(X.$,{data:{title:"Delete Item",message:"Are you sure you want to delete this item?",submitText:"Delete"}});this._sub.sink=i.afterClosed().pipe((0,D.w)(r=>"Confirmed"===r?this._itemService.deleteItemByID(t._id,t.categoryID):(0,A.of)(null))).subscribe(r=>{r&&(this._itemSubject$.next(!0),this._snackbar.open("Item deleted","Dismiss",{duration:2e3}))})}validateSlug(t){return(0,Q.H)(300).pipe((0,D.w)(()=>this._itemService.retrieveItemBySlug(t.value).pipe((0,x.U)(i=>i[0]?{slugExists:!0}:null))))}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(f.F0),e.Y36(h.uw),e.Y36($e.ux),e.Y36(v.N),e.Y36(f.gz),e.Y36(Je.F),e.Y36(Ke.o))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-item"]],features:[e._Bn([v.N])],decls:5,vars:11,consts:[[1,"container","mx-auto","my-2"],["title","Add item","type","button","mat-raised-button","","color","primary",3,"click"],[3,"columns","totalItems","dataSource","displayedColumns","actions","onActionTriggered","onPaginationChange"]],template:function(t,i){1&t&&(e.TgZ(0,"div",0)(1,"button",1),e.NdJ("click",function(){return i.onActionTriggered({type:i.actionType.CREATE,payload:null})}),e._uU(2," Add Item "),e.qZA(),e.TgZ(3,"app-datatable",2),e.NdJ("onActionTriggered",function(a){return i.onActionTriggered(a)})("onPaginationChange",function(a){return i.onPaginationChange(a)}),e.ALo(4,"async"),e.qZA()()),2&t&&(e.xp6(3),e.Q6J("columns",i.columns)("totalItems",i.totalItems)("dataSource",e.lcZ(4,5,i.items$))("displayedColumns",i.displayedColumn)("actions",e.kEZ(7,ke,i.actionType.EDIT,i.actionType.DELETE,i.actionType.VIEW)))},directives:[S.lW,Ge.n],pipes:[m.Ov],styles:[""],changeDetection:0}),n})()}];let He=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[f.Bz.forChild(We)],f.Bz]}),n})();var Qe=s(961),k=s(8388),W=s(3776),Ve=s(9021);let Xe=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.ez,u.UX,u.u5,h.Is,C.lN,R.c,U.LD,S.ot,k.s,Re,W.z,Ve.s]]}),n})(),_e=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[[m.ez,He,Qe.x,S.ot,Xe,W.z,k.s]]}),n})()}}]);
//# sourceMappingURL=137.c1706b6d3ef67163.js.map