{"version":3,"mappings":"2YAAAA,SACIA,iBAA+C,oBAC7BA,yEAAwB,gEAAkBC,oBACpDD,0BACJA,QAEAA,eAKKA,wBAAYA,UAGrBA,iBACJA,yCAbsBA,uCAKVA,wCAAgC,gCAOjBA,6CCV3B,MAAME,EAAiB,CAAC,CAAEC,KAAM,GAAIC,UCmBpC,MAAM,QAOFC,YACYC,EACAC,EACAC,EACAC,EACAC,EACAC,GALAC,eACAA,uBACAA,oBACAA,iBACAA,uBACAA,yBAVLA,iBAAa,EACZA,mBAAe,EACfA,oBAAgB,EAWxBC,WACID,KAAKE,MAAQF,KAAKL,gBAAgBQ,OAAOC,MACrCC,OAAWF,GACFA,EAAOG,KAILN,KAAKJ,aAAaW,mBAAmBJ,EAAOG,MAAMF,QACrDI,KAAKC,GACmB,IAAhBA,EAAKC,QACLV,KAAKN,QAAQiB,SAAS,CAAC,eAChB,KAEXX,KAAKY,WAAaH,EAAK,GAAGI,OACnBJ,EAAK,MAEhBK,OAAKL,IACDT,KAAKe,eAAgB,MAbzBf,KAAKN,QAAQiB,SAAS,CAAC,eAChBK,OAmBvBC,sBACSjB,KAAKkB,cAAgBlB,KAAKe,gBAC3Bf,KAAKD,kBAAkBoB,eACvBnB,KAAKkB,cAAe,GAI5BE,eAAed,GACXA,EAAKO,OAASb,KAAKY,WACnBZ,KAAKJ,aAAayB,UAAUf,EAAMA,EAAKgB,YAAYC,UAAWd,IAC1DT,KAAKF,gBAAgB0B,yBACrBxB,KAAKH,UAAU4B,KAAK,eAAgB,UAAW,CAC3CC,SAAU,sDApDbC,GAAevC,+FAAfuC,EAAeC,yQFvB5BxC,uDAAeA,0HEuBFuC,GAAb,KDbO,IAAME,EAAb,MAAM,sDAAOA,4DAHA,CAACC,cAAsBxC,IACtBwC,QAEDD,GAAb,GEKaE,EAAb,MAAM,sDAAOA,4DAFA,CAACC,KAAcH,EAAqBI,KAAmBC,KAAaC,SAEpEJ,GAAb","names":["i0","ctx_r4","routes","path","component","constructor","_router","_activatedRoute","_itemService","_snackbar","_sidenavService","_highlightService","this","ngOnInit","item$","params","pipe","switchMap","item","retrieveItemBySlug","map","data","length","navigate","markAsDone","isDone","tap","_isDataLoaded","EMPTY","ngAfterViewChecked","_highlighted","highlightAll","onStateChanges","patchItem","categoryID","subscribe","remindToReloadCategory","open","duration","DetailComponent","selectors","DetailRoutingModule","RouterModule","DetailModule","CommonModule","MatCheckboxModule","FormsModule","MatButtonModule"],"sources":["./src/app/pages/detail/detail.component.html","./src/app/pages/detail/detail-routing.module.ts","./src/app/pages/detail/detail.component.ts","./src/app/pages/detail/detail.module.ts"],"sourcesContent":["<ng-container *ngIf=\"item$ | async as item\">\n    <div class=\"flex items-center justify-between\">\n        <mat-checkbox [(ngModel)]=\"markAsDone\" (ngModelChange)=\"onStateChanges(item)\">\n            Mark as done\n        </mat-checkbox>\n\n        <a\n            [routerLink]=\"['/admin/items/']\"\n            [queryParams]=\"{ itemID: item._id }\"\n            mat-flat-button\n            color=\"primary\"\n            >Edit content</a\n        >\n    </div>\n    <div class=\"editorial\" [innerHTML]=\"item.content\"></div>\n</ng-container>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { DetailComponent } from './detail.component';\n\nconst routes: Routes = [{ path: '', component: DetailComponent }];\n\n@NgModule({\n    imports: [RouterModule.forChild(routes)],\n    exports: [RouterModule],\n})\nexport class DetailRoutingModule {}\n","import {\n    AfterViewChecked,\n    ChangeDetectionStrategy,\n    ChangeDetectorRef,\n    Component,\n    OnInit,\n    ViewEncapsulation,\n} from '@angular/core';\nimport { MatSnackBar } from '@angular/material/snack-bar';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { EMPTY, Observable, of } from 'rxjs';\nimport { map, switchMap, tap } from 'rxjs/operators';\nimport { Item } from 'src/app/common/schema/item';\nimport { ApiItemAbstractService } from 'src/app/common/service/api/abstract/item.abstract.service';\nimport { HighlightService } from 'src/app/common/service/highlight.service';\nimport { SidenavService } from 'src/app/common/service/sidenav.service';\n\n@Component({\n    selector: 'app-detail',\n    templateUrl: './detail.component.html',\n    styleUrls: ['./detail.component.scss'],\n    changeDetection: ChangeDetectionStrategy.OnPush,\n})\nexport class DetailComponent implements OnInit, AfterViewChecked {\n    public item$: Observable<Item> | undefined;\n\n    public markAsDone = false;\n    private _highlighted = false;\n    private _isDataLoaded = false;\n\n    constructor(\n        private _router: Router,\n        private _activatedRoute: ActivatedRoute,\n        private _itemService: ApiItemAbstractService,\n        private _snackbar: MatSnackBar,\n        private _sidenavService: SidenavService,\n        private _highlightService: HighlightService\n    ) {}\n\n    ngOnInit(): void {\n        this.item$ = this._activatedRoute.params.pipe(\n            switchMap((params) => {\n                if (!params.item) {\n                    this._router.navigate(['/checklist']);\n                    return EMPTY;\n                }\n                return this._itemService.retrieveItemBySlug(params.item).pipe(\n                    map((data: [Item] | []) => {\n                        if (data.length === 0) {\n                            this._router.navigate(['/checklist']);\n                            return {} as Item;\n                        }\n                        this.markAsDone = data[0].isDone;\n                        return data[0];\n                    }),\n                    tap((data: Item) => {\n                        this._isDataLoaded = true;\n                    })\n                );\n            })\n        );\n    }\n\n    ngAfterViewChecked(): void {\n        if (!this._highlighted && this._isDataLoaded) {\n            this._highlightService.highlightAll();\n            this._highlighted = true;\n        }\n    }\n\n    onStateChanges(item: Item) {\n        item.isDone = this.markAsDone;\n        this._itemService.patchItem(item, item.categoryID).subscribe((data: any) => {\n            this._sidenavService.remindToReloadCategory();\n            this._snackbar.open('Item updated', 'Dismiss', {\n                duration: 2000,\n            });\n        });\n    }\n}\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\n\nimport { DetailRoutingModule } from './detail-routing.module';\nimport { DetailComponent } from './detail.component';\n\n// Material Modules\nimport { MatCheckboxModule } from '@angular/material/checkbox';\nimport { MatButtonModule } from '@angular/material/button';\nimport { FormsModule } from '@angular/forms';\n\n@NgModule({\n    declarations: [DetailComponent],\n    imports: [CommonModule, DetailRoutingModule, MatCheckboxModule, FormsModule, MatButtonModule],\n})\nexport class DetailModule {}\n"],"sourceRoot":"webpack:///","file":"218.8c282248d23afb0a.js"}